a.collapser(class=details_open ? '' : 'collapsed', data-toggle="collapse", data-parent="#details-view-container", href="#route-details")
  h3
    span.icon-icon-public-transport &nbsp;
    = t('sidebar.route_here')
  span.short-text
      span.length
      = itinerary.duration

#route-details.section-content.collapse(class=details_open ? 'in' : '')
  .route-controllers.hide
    .row
      .col-sm-3
        = t('transit.start')
      .col-sm-9
        input(type="text", placeholder!=t('transit.input_placeholder'), value=t('transit.current_location'))
    .row
      .col-sm-3
        = t('transit.end')
      .col-sm-9
        input(type="text", placeholder!=t('transit.input_placeholder'), value=itinerary.end.name)
    .row
      .col-sm-3
      .col-sm-9
        span.sm-select
          select
            option(value='depart')= t('transit.depart')
            option(value='arrive')= t('transit.arrive')
        input(type="datetime-local", value="#{current_time}")

    a.switch-end-points(href="#")
      span.icon-icon-vice-versa

  if itinerary_choices.length > 1
    ul.route-selector
      each index in itinerary_choices
        li(class=index === selected_itinerary_index ? 'selected' : undefined)
          a(href="#", data-index="#{index}")
            = 'Route ' + (index + 1)

  .route-info
    = itinerary.duration
    = ' ' + t('transit.total')
    | &nbsp;-&nbsp;
    = itinerary.walk_distance
    = ' ' + t('transit.by_foot')

  .legs
    each leg, index in itinerary.legs
      .leg
        .row.layover-row
          .col-sm-3(class=index === 0 ? 'bold' : '')
            = leg.start_time
          .col-sm-9.bold
            = leg.start_location
        a.collapser.collapsed(class=leg.has_warnings ? 'has-warnings' : '', data-toggle="collapse", data-parent="#route-details", href="#leg-#{index}-details")
          .row.transit-row
            .col-sm-3.leg-icon(class="#{leg.transit_color_class}-color")
              span.icon(class!=leg.icon)
              span.route= leg.route
            .col-sm-9
              span.text= leg.transit_mode + ' ' + leg.transit_details
              span.distance= leg.distance
        .leg-content.collapse(id="leg-#{index}-details")
          .route-line(class="#{leg.transit_color_class}-background-color")
          .steps
            each step in leg.steps
              .step
                span.text= step.text
                if step.time
                  | &nbsp;(
                  = step.time
                  |)
                if step.warning
                  span.warning
                    | &nbsp;-&nbsp;
                    = step.warning
    .end
      .row.layover-row
        .col-sm-3
          span.time.bold= itinerary.end.time
        .col-sm-9
          span.bold= itinerary.end.address
          | &nbsp;-&nbsp;
          span= itinerary.end.name

    a.accessibility-viewpoint(href="#")
      span.icon-icon-wheelchair
      = t('transit.accessibility_not_set')
